不在构造和析构函数中调用virtual函数

派生类对象内的基类成分会在派生类自身成分被构造之前先构造妥当。在派生类的基类构造期间，该派生类的类型是基类类型。此时调用virtual函数，会调用基类的函数。

析构函数同理，在派生类自己的成员被删除后，调用基类的析构函数，此时该对象被看做是基类对象。

若想派生类对象被实例化时自动调用基类的某一函数，应把函数设为非虚，然后在基类的构造函数中调用。派生类对象创建时，通过派生类的构造函数去调用基类的构造函数。